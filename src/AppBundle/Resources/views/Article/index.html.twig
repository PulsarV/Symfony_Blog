{% extends '::base_with_sidebar.html.twig' %}

{% block content %}
    {% for article in articles %}
        <div class="blog-post">
            <div class="post-title">
                <h3><a href="{{ path('articleshow', {'slug': article.slug }) }}">{{ article.title }}</a></h3>
            </div>
            <div class="post-info top-info-block">
                <i class="glyphicon glyphicon-user"></i><a href="" title="Show posts by this author">{{ article.author.nickname }}</a>&nbsp;&nbsp;
                <i class="glyphicon glyphicon-time"></i>{{ article.createdAt|date("d M, Y") }}&nbsp;&nbsp;
                <i class="glyphicon glyphicon-star-empty"></i>{{ article.rating|number_format(2, '.', '') }}&nbsp;&nbsp;
                <a href="#" title="Show comments"><i class="glyphicon glyphicon-comment"></i>{{ article.comments|length }}</a>
            </div>
            <div class="post-image">
                <img src="{{ asset('images/blog-large.jpg') }}" alt="Post Title">
            </div>
            <div class="post-content">
                   {{ article.content|slice(0, 800) }}
            </div>
            <div class="post-info bottom-info-block">
                <i class="glyphicon glyphicon-folder-open"></i> <a href="" title="Show all posts in this category">{{ article.category.name }}</a>
                <br>
                <i class="glyphicon glyphicon-tags"></i>
                {% for tag in article.tags %}
                    <a href="" title="Show posts filtered by tag">{{ tag.name }}</a>&nbsp;
                {% endfor %}
            </div>
            <div class="post-more">
                <a href="{{ path('articleshow', {'slug': article.slug }) }}" class="btn btn-small">Read more</a>
            </div>
        </div>
    {% endfor %}
    <!-- Pagination -->
    <div class="pagination-wrapper ">
        <ul class="pagination pagination-sm">
            {% if page > 1 %}
                <li><a href="{{ path('articleindex', {'page': page - 1 }) }}">Previous</a></li>
            {% else %}
                <li class="disabled"><a href="">Previous</a></li>
            {% endif %}

            {% for i in 1..pagesCount %}
                {% if i == page %}
                    <li class="active"><a href="">{{ i }}</a></li>
                {% else %}
                    <li><a href="{{ path('articleindex', {'page': i }) }}">{{ i }}</a></li>
                {% endif %}
            {% endfor %}

            {% if page < pagesCount %}
                <li><a href="{{ path('articleindex', {'page': page + 1 }) }}">Next</a></li>
            {% else %}
                <li class="disabled"><a href="">Next</a></li>
            {% endif %}
        </ul>
    </div>
{% endblock %}